import { create } from 'zustand'
import { AmmAsOrderbook, Token } from '@/interfaces'

// const orderbookHardcoded: AmmAsOrderbook = {
//     block: 22146169,
//     timestamp: 1743174025,
//     base: {
//         address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
//         decimals: 18,
//         symbol: 'WETH',
//         gas: '29962',
//     },
//     quote: {
//         address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
//         decimals: 6,
//         symbol: 'USDC',
//         gas: '40652',
//     },
//     prices_base_to_quote: [1887.7254411283404, 1887.690874398339, 1886.47314603231, 1888.0038213926257, 1886.982023201949],
//     prices_quote_to_base: [0.0005297380531155395, 0.0005297477534920692, 0.0005300897084611205, 0.0005296599448948053, 0.0005299467550322168],
//     bids: [
//         {
//             amount: 0.008979157255843986,
//             output: 16.941798687163356,
//             distribution: [0, 0, 0, 0, 100],
//             gas_costs: [0, 0, 0, 0, 132000],
//             gas_costs_usd: [0, 0, 0, 0, 0.3125788750741457],
//             average_sell_price: 1886.791622469578,
//         },
//         {
//             amount: 4.159526682575064,
//             output: 7845.109389374326,
//             distribution: [0, 0, 22.32, 0, 77.68],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 1886.0581955727728,
//         },
//         {
//             amount: 7.684661608661816,
//             output: 14491.745191374326,
//             distribution: [0, 0, 52.64, 0, 47.36],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 1885.801344204911,
//         },
//         {
//             amount: 14.197294198647125,
//             output: 26770.748811374327,
//             distribution: [0, 0, 74.7, 0, 25.3],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 1885.623305173555,
//         },
//         {
//             amount: 26.229282800916813,
//             output: 49453.69826437433,
//             distribution: [0, 0, 75.59, 0, 24.41],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 1885.4384483073147,
//         },
//         {
//             amount: 48.45819679612117,
//             output: 91356.22256937432,
//             distribution: [0, 0, 89.81, 0, 10.19],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 1885.258400219443,
//         },
//         {
//             amount: 89.52577371461813,
//             output: 168746.5064293696,
//             distribution: [0, 0, 87.49, 0, 12.51],
//             gas_costs: [0, 0, 134000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3173149186358752, 0, 0.3125788750741457],
//             average_sell_price: 1884.893024966016,
//         },
//         {
//             amount: 165.39749080887302,
//             output: 311652.7893343649,
//             distribution: [0, 0, 88.81, 0, 11.19],
//             gas_costs: [0, 0, 134000, 0, 134000],
//             gas_costs_usd: [0, 0, 0.3173149186358752, 0, 0.3173149186358752],
//             average_sell_price: 1884.2655218663433,
//         },
//         {
//             amount: 305.5693218924332,
//             output: 575470.7600974784,
//             distribution: [1.87, 0.46, 92.29, 0.31, 5.06],
//             gas_costs: [132000, 120000, 136000, 120000, 134000],
//             gas_costs_usd: [0.3125788750741457, 0.28416261370376883, 0.32205096219760465, 0.28416261370376883, 0.3173149186358752],
//             average_sell_price: 1883.2740032065656,
//         },
//         {
//             amount: 564.5346251939159,
//             output: 1062114.5786274597,
//             distribution: [4.55, 1.81, 87.7, 0.21, 5.73],
//             gas_costs: [132000, 120000, 140000, 120000, 138000],
//             gas_costs_usd: [0.3125788750741457, 0.28416261370376883, 0.3315230493210636, 0.28416261370376883, 0.3267870057593341],
//             average_sell_price: 1881.3984673882965,
//         },
//         {
//             amount: 1042.969042406109,
//             output: 1948366.4948934359,
//             distribution: [6.19, 1.37, 82.36, 5.88, 4.2],
//             gas_costs: [134000, 120000, 146000, 120000, 140000],
//             gas_costs_usd: [0.3173149186358752, 0.28416261370376883, 0.345731180006252, 0.28416261370376883, 0.3315230493210636],
//             average_sell_price: 1868.0961904665864,
//         },
//         {
//             amount: 1926.869274039422,
//             output: 3606795.6560333795,
//             distribution: [6.74, 1.7, 86.75, 0.19, 4.62],
//             gas_costs: [136000, 120000, 162000, 120000, 146000],
//             gas_costs_usd: [0.32205096219760465, 0.28416261370376883, 0.3836195285000879, 0.28416261370376883, 0.345731180006252],
//             average_sell_price: 1871.8424257563763,
//         },
//         {
//             amount: 3559.861365272922,
//             output: 6621861.0530993035,
//             distribution: [7.15, 1.86, 87.27, 0.21, 3.52],
//             gas_costs: [140000, 120000, 188000, 120000, 148000],
//             gas_costs_usd: [0.3315230493210636, 0.28416261370376883, 0.44518809480257115, 0.28416261370376883, 0.35046722356798155],
//             average_sell_price: 1860.1457679494858,
//         },
//         {
//             amount: 6576.7891525907,
//             output: 11943956.916393097,
//             distribution: [8.21, 1.89, 82.45, 4.23, 3.21],
//             gas_costs: [148000, 120000, 232000, 120000, 182000],
//             gas_costs_usd: [0.35046722356798155, 0.28416261370376883, 0.5493810531606197, 0.28416261370376883, 0.4309799641173827],
//             average_sell_price: 1816.0772132535503,
//         },
//         {
//             amount: 12150.516865512442,
//             output: 21639883.2420603,
//             distribution: [15.45, 3.77, 77.05, 0.39, 3.35],
//             gas_costs: [186000, 120000, 452000, 120000, 260000],
//             gas_costs_usd: [0.4404520512408417, 0.28416261370376883, 1.0703458449508625, 0.28416261370376883, 0.6156856630248324],
//             average_sell_price: 1780.984585395055,
//         },
//         {
//             amount: 22447.893139609965,
//             output: 33731310.95190144,
//             distribution: [22.4, 11.59, 58.27, 1.23, 6.51],
//             gas_costs: [404000, 120000, 910000, 120000, 1212000],
//             gas_costs_usd: [0.956680799469355, 0.28416261370376883, 2.1548998205869134, 0.28416261370376883, 2.870042398408065],
//             average_sell_price: 1502.6493017458977,
//         },
//     ],
//     asks: [
//         {
//             amount: 4.6453622382636,
//             output: 0.00246154751470195,
//             distribution: [0, 0, 0, 0, 100],
//             gas_costs: [0, 0, 0, 0, 132000],
//             gas_costs_usd: [0, 0, 0, 0, 0.3125788750741457],
//             average_sell_price: 0.0005298935830408804,
//         },
//         {
//             amount: 2151.9289204683682,
//             output: 1.1401885478391616,
//             distribution: [0, 0, 42.29, 0, 57.71],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005298448927574993,
//         },
//         {
//             amount: 3975.6556025876416,
//             output: 2.106436808824896,
//             distribution: [0, 0, 64.67, 0, 35.33],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005298338235749666,
//         },
//         {
//             amount: 7344.962614725382,
//             output: 3.8915447297343193,
//             distribution: [0, 0, 76.75, 0, 23.25],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005298249881240742,
//         },
//         {
//             amount: 13569.70552896985,
//             output: 7.189420958878295,
//             distribution: [0, 0, 80.79, 0, 19.21],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005298140732710449,
//         },
//         {
//             amount: 25069.822380551333,
//             output: 13.282014401246547,
//             distribution: [0, 0, 91.6, 0, 8.4],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005298008976658154,
//         },
//         {
//             amount: 46316.11149192741,
//             output: 24.537158786705753,
//             distribution: [0, 0, 91.71, 0, 8.29],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005297758813684896,
//         },
//         {
//             amount: 85568.3040417885,
//             output: 45.32820884541759,
//             distribution: [0, 0, 94.74, 0, 5.26],
//             gas_costs: [0, 0, 132000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3125788750741457, 0, 0.3125788750741457],
//             average_sell_price: 0.0005297312989129551,
//         },
//         {
//             amount: 158086.1264198342,
//             output: 83.72992390397218,
//             distribution: [0, 0, 93.1, 0, 6.9],
//             gas_costs: [0, 0, 134000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3173149186358752, 0, 0.3125788750741457],
//             average_sell_price: 0.000529647514305271,
//         },
//         {
//             amount: 292061.68856896984,
//             output: 154.64081339231134,
//             distribution: [0, 0, 90.86, 0, 9.14],
//             gas_costs: [0, 0, 134000, 0, 132000],
//             gas_costs_usd: [0, 0, 0.3173149186358752, 0, 0.3125788750741457],
//             average_sell_price: 0.000529479967573038,
//         },
//         {
//             amount: 539579.4802589065,
//             output: 285.5350850076977,
//             distribution: [0, 0, 90.86, 0, 9.14],
//             gas_costs: [0, 0, 136000, 0, 134000],
//             gas_costs_usd: [0, 0, 0.32205096219760465, 0, 0.3173149186358752],
//             average_sell_price: 0.0005291807703124091,
//         },
//         {
//             amount: 996864.7957320787,
//             output: 527.0648914183969,
//             distribution: [1.4, 0.39, 94.21, 0.03, 3.97],
//             gas_costs: [132000, 120000, 140000, 120000, 132000],
//             gas_costs_usd: [0.3125788750741457, 0.28416261370376883, 0.3315230493210636, 0.28416261370376883, 0.3125788750741457],
//             average_sell_price: 0.0005287225445968046,
//         },
//         {
//             amount: 1841692.3869920543,
//             output: 972.5391127133792,
//             distribution: [2.89, 0.66, 93.16, 0.15, 3.13],
//             gas_costs: [134000, 120000, 144000, 120000, 134000],
//             gas_costs_usd: [0.3173149186358752, 0.28416261370376883, 0.34099513644452256, 0.28416261370376883, 0.3173149186358752],
//             average_sell_price: 0.000528068161427223,
//         },
//         {
//             amount: 3402498.3757336857,
//             output: 1793.3954840829801,
//             distribution: [3.64, 0.88, 92.54, 0.09, 2.85],
//             gas_costs: [134000, 120000, 150000, 120000, 140000],
//             gas_costs_usd: [0.3173149186358752, 0.28416261370376883, 0.355203267129711, 0.28416261370376883, 0.3315230493210636],
//             average_sell_price: 0.0005270819515664366,
//         },
//         {
//             amount: 6286063.448293082,
//             output: 3302.299539559484,
//             distribution: [8.84, 0.87, 85.99, 0.87, 3.44],
//             gas_costs: [136000, 120000, 160000, 120000, 146000],
//             gas_costs_usd: [0.32205096219760465, 0.28416261370376883, 0.37888348493835844, 0.28416261370376883, 0.345731180006252],
//             average_sell_price: 0.0005253366541275102,
//         },
//         {
//             amount: 11613405.595659,
//             output: 6072.476521230695,
//             distribution: [12.57, 0.9, 83.34, 0.37, 2.82],
//             gas_costs: [140000, 120000, 180000, 120000, 152000],
//             gas_costs_usd: [0.3315230493210636, 0.28416261370376883, 0.4262439205556532, 0.28416261370376883, 0.3599393106914405],
//             average_sell_price: 0.0005228850806261808,
//         },
//     ],
//     base_lqdty: [18388.008513272493, 5120.535770774877, 63439.14211454638, 575.6788700736288, 2268.2072897724915],
//     quote_lqdty: [9339180.199788, 9665988.646522, 25305187.338708, 1086883.906594, 1056382.291024],
//     pools: [
//         {
//             address: '0x8ad599c3a0ff1de082011efddc58f1908eb6e6d8',
//             id: '0x8ad599c3a0ff1de082011efddc58f1908eb6e6d8',
//             tokens: [
//                 {
//                     address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
//                     decimals: 6,
//                     symbol: 'USDC',
//                     gas: '40652',
//                 },
//                 {
//                     address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
//                     decimals: 18,
//                     symbol: 'WETH',
//                     gas: '29962',
//                 },
//             ],
//             protocol_system: 'uniswap_v3',
//             protocol_type_name: 'uniswap_v3_pool',
//             contract_ids: [],
//             static_attributes: [
//                 ['tick_spacing', '0x3c'],
//                 ['fee', '0x0bb8'],
//                 ['pool_address', '0x8ad599c3a0ff1de082011efddc58f1908eb6e6d8'],
//             ],
//             creation_tx: '0x89d75075eaef8c21ab215ae54144ba563b850ee7460f89b2a175fd0e267ed330',
//             fee: 30,
//         },
//         {
//             address: '0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc',
//             id: '0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc',
//             tokens: [
//                 {
//                     address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
//                     decimals: 6,
//                     symbol: 'USDC',
//                     gas: '40652',
//                 },
//                 {
//                     address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
//                     decimals: 18,
//                     symbol: 'WETH',
//                     gas: '29962',
//                 },
//             ],
//             protocol_system: 'uniswap_v2',
//             protocol_type_name: 'uniswap_v2_pool',
//             contract_ids: [],
//             static_attributes: [
//                 ['pool_address', '0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc'],
//                 ['fee', '0x1e'],
//             ],
//             creation_tx: '0xd07cbde817318492092cc7a27b3064a69bd893c01cb593d6029683ffd290ab3a',
//             fee: 30,
//         },
//         {
//             address: '0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640',
//             id: '0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640',
//             tokens: [
//                 {
//                     address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
//                     decimals: 6,
//                     symbol: 'USDC',
//                     gas: '40652',
//                 },
//                 {
//                     address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
//                     decimals: 18,
//                     symbol: 'WETH',
//                     gas: '29962',
//                 },
//             ],
//             protocol_system: 'uniswap_v3',
//             protocol_type_name: 'uniswap_v3_pool',
//             contract_ids: [],
//             static_attributes: [
//                 ['fee', '0x01f4'],
//                 ['tick_spacing', '0x0a'],
//                 ['pool_address', '0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640'],
//             ],
//             creation_tx: '0x125e0b641d4a4b08806bf52c0c6757648c9963bcda8681e4f996f09e00d4c2cc',
//             fee: 5,
//         },
//         {
//             address: '0x397ff1542f962076d0bfe58ea045ffa2d347aca0',
//             id: '0x397ff1542f962076d0bfe58ea045ffa2d347aca0',
//             tokens: [
//                 {
//                     address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
//                     decimals: 6,
//                     symbol: 'USDC',
//                     gas: '40652',
//                 },
//                 {
//                     address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
//                     decimals: 18,
//                     symbol: 'WETH',
//                     gas: '29962',
//                 },
//             ],
//             protocol_system: 'sushiswap_v2',
//             protocol_type_name: 'sushiswap_v2_pool',
//             contract_ids: [],
//             static_attributes: [
//                 ['fee', '0x1e'],
//                 ['pool_address', '0x397ff1542f962076d0bfe58ea045ffa2d347aca0'],
//             ],
//             creation_tx: '0x9011586359ddfc2660fe5bcdf2b53f1d4238ab4f4f998bc79a8cd69aa7c9040d',
//             fee: 30,
//         },
//         {
//             address: '0xe0554a476a092703abdb3ef35c80e0d76d32939f',
//             id: '0xe0554a476a092703abdb3ef35c80e0d76d32939f',
//             tokens: [
//                 {
//                     address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
//                     decimals: 6,
//                     symbol: 'USDC',
//                     gas: '40652',
//                 },
//                 {
//                     address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
//                     decimals: 18,
//                     symbol: 'WETH',
//                     gas: '29962',
//                 },
//             ],
//             protocol_system: 'uniswap_v3',
//             protocol_type_name: 'uniswap_v3_pool',
//             contract_ids: [],
//             static_attributes: [
//                 ['fee', '0x64'],
//                 ['pool_address', '0xe0554a476a092703abdb3ef35c80e0d76d32939f'],
//                 ['tick_spacing', '0x01'],
//             ],
//             creation_tx: '0x9a773c2ab3acc47552e73d553b35e29c8fb0ca9576882f46552254232edb3cfd',
//             fee: 1,
//         },
//     ],
//     eth_usd: 1886.17,
//     mpd_base_to_quote: {
//         best_ask: 1886.792687163355,
//         best_bid: 1887.1711477765455,
//         mid: 1886.98191746995,
//         spread: 0.3784606131905548,
//         spread_pct: 0.020056398510590483,
//     },
//     mpd_quote_to_base: {
//         best_ask: 0.0005298936459357141,
//         best_bid: 0.0005299999341758217,
//         mid: 0.0005299467900557679,
//         spread: 1.0628824010760606e-7,
//         spread_pct: 0.020056398510578964,
//     },
//     base_worth_eth: 1,
//     quote_worth_eth: 0.0005297380531155395,
// }

export const useApiStore = create<{
    apiTokens: Token[]
    apiOrderbooks: Record<string, undefined | AmmAsOrderbook>
    orderBookRefreshIntervalMs: number
    apiStoreRefreshedAt: number
    setApiTokens: (apiTokens: Token[]) => void
    setApiOrderbook: (key: string, orderbook?: AmmAsOrderbook) => void
    setApiStoreRefreshedAt: (apiStoreRefreshedAt: number) => void
    getOrderbook: (key: string) => undefined | AmmAsOrderbook
}>((set, get) => ({
    apiTokens: [],
    apiOrderbooks: {},
    orderBookRefreshIntervalMs: 10 * 1000,
    apiStoreRefreshedAt: -1,
    setApiTokens: (apiTokens) => set(() => ({ apiTokens })),
    setApiOrderbook: (key, orderbook) => set((state) => ({ apiOrderbooks: { ...state.apiOrderbooks, [key]: orderbook } })),
    setApiStoreRefreshedAt: (apiStoreRefreshedAt) => set(() => ({ apiStoreRefreshedAt })),
    // getOrderbook: (key) => get().apiOrderbooks[key] ?? orderbookHardcoded,
    getOrderbook: (key) => get().apiOrderbooks[key],
}))
